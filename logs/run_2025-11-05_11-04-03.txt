=== Utility Bills Processing Run @ 2025-11-05_11-04-03 ===
Python: 3.12.11  PID: 440168
Working dir: C:\Users\tejas\Documents\Utility Bills Project\version_1
===============================================

Found 1 PDF file(s) in inbox folder:
  1. Seattle Public Utilities.pdf

============================================================
STARTING BATCH PROCESSING
============================================================
Total files: 1
Batch size: 20
Total batches: 1
============================================================

============================================================
PROCESSING BATCH 1 of 1 (1 files)
============================================================

[1.1] Processing: Seattle Public Utilities.pdf
Detected company: Seattle Public Utilities - Using specialized template
Converting PDF to images...
Processing 4 page(s) with GPT-4o Vision...
  Encoding page 1/4...
  Encoding page 2/4...
  Encoding page 3/4...
  Encoding page 4/4...
Sending images to GPT-4o Vision API...

TEXT RESPONSE
{
  "account_number": "1799133259",
  "customer_name": "TACOMA INVESTMENTS",
  "service_address": "213-17 BOSTON ST",
  "billing_address": "150 NICKERSON ST SUITE 211 SEATTLE WA 98109-1634",
  "bill_date": "July 22 2025",
  "total_amount_due_date": "August 12 2025",
  "number_of_days": "31",
  "previous_balance": "5702.64",
  "current_billing": "3173.80",
  "current_adjustments": "83.70",
  "total_amount_due": "1141.88",
  
  "payment_information": {
    "payment_date": null,
    "payment_amount": null
  },
  
  "payments_applied": [
    {
      "payment_date": "July 22 2025",
      "payment_amount": "7734.56"
    }
  ],
  
  "adjustments": [
    {
      "category": "Extra Garbage",
      "amount": "41.85"
    },
    {
      "category": "Extra Garbage",
      "amount": "41.85"
    }
  ],
  
  "spu_contact_info": {
    "website": "seattle.gov/utilities",
    "phone_number": "(206) 684-3000",
    "email": "SPUCustomerService@seattle.gov"
  },
  
  "spu_late_payment_fee": {
    "percentage": "1%",
    "description": "A late payment charge of 1% will be applied to accounts that are more than 15 days past due."
  },
  
  "spu_consumption": {
    "ccf": "75",
    "gallons": "56100",
    "ccf_to_gallons_conversion": "1 CCF = 748 Gallons"
  },
  
  "service_types": [
    {
      "service_name": "Water Service",
      "current_service": "608.60",
      "service_from_date": "June 15 2025",
      "service_to_date": "July 16 2025",
      "previous_reading": "8950.00",
      "current_reading": "9025.00",
      "line_item_charges": [
        {
          "category": "Base service charge",
          "amount": "38.60",
          "meter_number": "PCN-20506305-1",
          "ccf_usage": "75.00",
          "previous_reading": "8950.00",
          "current_reading": "9025.00"
        }
      ]
    },
    {
      "service_name": "Sewer Service",
      "current_service": "1440.75",
      "service_from_date": "June 15 2025",
      "service_to_date": "July 16 2025",
      "previous_reading": null,
      "current_reading": null,
      "line_item_charges": []
    },
    {
      "service_name": "Solid Waste Service",
      "current_service": "1040.75",
      "service_from_date": "June 01 2025",
      "service_to_date": "June 30 2025",
      "previous_reading": null,
      "current_reading": null,
      "line_item_charges": []
    }
  ],
  
  "taxes": {
    "per_service_taxes": [
      {
        "service_name": "Water Service",
        "tax_name": "City taxes",
        "tax_rate": "15.5%",
        "tax_amount": null
      }
    ],
    "global_taxes": []
  }
}

END OF TEXT RESPONSE

DATA
{'account_number': '1799133259', 'customer_name': 'TACOMA INVESTMENTS', 'service_address': '213-17 BOSTON ST', 'billing_address': '150 NICKERSON ST SUITE 211 SEATTLE WA 98109-1634', 'bill_date': 'July 22 2025', 'total_amount_due_date': 'August 12 2025', 'number_of_days': '31', 'previous_balance': '5702.64', 'current_billing': '3173.80', 'current_adjustments': '83.70', 'total_amount_due': '1141.88', 'payment_information': {'payment_date': None, 'payment_amount': None}, 'payments_applied': [{'payment_date': 'July 22 2025', 'payment_amount': '7734.56'}], 'adjustments': [{'category': 'Extra Garbage', 'amount': '41.85'}, {'category': 'Extra Garbage', 'amount': '41.85'}], 'spu_contact_info': {'website': 'seattle.gov/utilities', 'phone_number': '(206) 684-3000', 'email': 'SPUCustomerService@seattle.gov'}, 'spu_late_payment_fee': {'percentage': '1%', 'description': 'A late payment charge of 1% will be applied to accounts that are more than 15 days past due.'}, 'spu_consumption': {'ccf': '75', 'gallons': '56100', 'ccf_to_gallons_conversion': '1 CCF = 748 Gallons'}, 'service_types': [{'service_name': 'Water Service', 'current_service': '608.60', 'service_from_date': 'June 15 2025', 'service_to_date': 'July 16 2025', 'previous_reading': '8950.00', 'current_reading': '9025.00', 'line_item_charges': [{'category': 'Base service charge', 'amount': '38.60', 'meter_number': 'PCN-20506305-1', 'ccf_usage': '75.00', 'previous_reading': '8950.00', 'current_reading': '9025.00'}]}, {'service_name': 'Sewer Service', 'current_service': '1440.75', 'service_from_date': 'June 15 2025', 'service_to_date': 'July 16 2025', 'previous_reading': None, 'current_reading': None, 'line_item_charges': []}, {'service_name': 'Solid Waste Service', 'current_service': '1040.75', 'service_from_date': 'June 01 2025', 'service_to_date': 'June 30 2025', 'previous_reading': None, 'current_reading': None, 'line_item_charges': []}], 'taxes': {'per_service_taxes': [{'service_name': 'Water Service', 'tax_name': 'City taxes', 'tax_rate': '15.5%', 'tax_amount': None}], 'global_taxes': []}}

END OF DATA
Successfully extracted data from 4 page(s)
Debug - organize_files called with result keys: ['account_number', 'customer_name', 'service_address', 'billing_address', 'bill_date', 'total_amount_due_date', 'number_of_days', 'previous_balance', 'current_billing', 'current_adjustments', 'total_amount_due', 'payment_information', 'payments_applied', 'adjustments', 'spu_contact_info', 'spu_late_payment_fee', 'spu_consumption', 'service_types', 'taxes', 'billing_validation', 'source_file']
Debug - success_indicators: [True, True, True, True, True]
 Moved PDF to processed/pdf/Seattle Public Utilities.pdf
Saved JSON to processed/json/Seattle Public Utilities.json
Successfully processed Seattle Public Utilities.pdf

============================================================
BATCH 1 SUMMARY
============================================================
Files in batch: 1
Successfully processed: 1
Failed/Incomplete: 0

============================================================
FINAL PROCESSING SUMMARY
============================================================
Total files processed: 1
Successfully extracted: 1
Incomplete/Failed: 0

Files organized into:
  - processed/pdf: 1 files
  - processed/json: 1 files
  - unprocessed/pdf: 0 files
  - unprocessed/json: 0 files
