=== Utility Bills Processing Run @ 2025-11-04_14-27-08 ===
Python: 3.12.11  PID: 300296
Working dir: C:\Users\tejas\Documents\Utility Bills Project\version_1
===============================================

Found 1 PDF file(s) in inbox folder:
  1. Republic Services.pdf

============================================================
STARTING BATCH PROCESSING
============================================================
Total files: 1
Batch size: 20
Total batches: 1
============================================================

============================================================
PROCESSING BATCH 1 of 1 (1 files)
============================================================

[1.1] Processing: Republic Services.pdf
Detected company: Republic Services - Using specialized template
Converting PDF to images...
Processing 2 page(s) with GPT-4o Vision...
  Encoding page 1/2...
  Encoding page 2/2...
Sending images to GPT-4o Vision API...

TEXT RESPONSE
{
  "account_number": "301720815283",
  "customer_name": "CORNELL & ASSOCIATES",
  "service_address": "425 Bellevue Way SE, Bellevue, WA",
  "billing_address": "425 APARTMENTS, CORNELL & ASSOCIATES, 2633 EASTLAKE AVE E, SEATTLE WA 98102-3231",
  "bill_date": "May 31, 2025",
  "total_amount_due_date": "June 18, 2025",
  "number_of_days": null,
  "previous_balance": "575.49",
  "current_billing": "575.49",
  "total_amount_due": "575.49",
  "payments_applied": [
    {
      "payment_date": "May 19, 2025",
      "payment_amount": "-575.49"
    }
  ],
  "republic_company_address": "1600 127th Avenue NE, Bellevue WA 98005-213636",
  "republic_contact_info": {
    "phone_number": "(206) 682-3037",
    "support_website": "RepublicServices.com/Support"
  },
  "republic_payment_website": "RepublicServices.com/MyBill",
  "republic_late_fee": {
    "percentage": "1%",
    "description": "Late fees are 1% (minimum $1.00)."
  },
  "taxes": {
    "per_service_taxes": [],
    "global_taxes": [
      {
        "tax_name": "City Utility Tax",
        "tax_rate": null,
        "tax_amount": "24.99"
      },
      {
        "tax_name": "State Refuse Tax",
        "tax_rate": null,
        "tax_amount": "19.99"
      }
    ]
  },
  "service_types": [
    {
      "service_name": "Waste Container",
      "current_service": "575.49",
      "service_from_date": "May 1, 2025",
      "service_to_date": "May 31, 2025",
      "previous_reading": null,
      "current_reading": null,
      "line_item_charges": [
        {
          "category": "1 Waste Container 6 Cu Yd, 1 Lift Per Week Multi-Family",
          "amount": "515.69",
          "meter_number": null,
          "ccf_usage": null,
          "previous_reading": null,
          "current_reading": null
        },
        {
          "category": "Hazardous Waste Fee 05/01-05/31",
          "amount": "14.82",
          "meter_number": null,
          "ccf_usage": null,
          "previous_reading": null,
          "current_reading": null
        },
        {
          "category": "Pickup Service 05/01-05/31",
          "amount": "515.69",
          "meter_number": null,
          "ccf_usage": null,
          "previous_reading": null,
          "current_reading": null
        }
      ]
    }
  ]
}

END OF TEXT RESPONSE

DATA
{'account_number': '301720815283', 'customer_name': 'CORNELL & ASSOCIATES', 'service_address': '425 Bellevue Way SE, Bellevue, WA', 'billing_address': '425 APARTMENTS, CORNELL & ASSOCIATES, 2633 EASTLAKE AVE E, SEATTLE WA 98102-3231', 'bill_date': 'May 31, 2025', 'total_amount_due_date': 'June 18, 2025', 'number_of_days': None, 'previous_balance': '575.49', 'current_billing': '575.49', 'total_amount_due': '575.49', 'payments_applied': [{'payment_date': 'May 19, 2025', 'payment_amount': '-575.49'}], 'republic_company_address': '1600 127th Avenue NE, Bellevue WA 98005-213636', 'republic_contact_info': {'phone_number': '(206) 682-3037', 'support_website': 'RepublicServices.com/Support'}, 'republic_payment_website': 'RepublicServices.com/MyBill', 'republic_late_fee': {'percentage': '1%', 'description': 'Late fees are 1% (minimum $1.00).'}, 'taxes': {'per_service_taxes': [], 'global_taxes': [{'tax_name': 'City Utility Tax', 'tax_rate': None, 'tax_amount': '24.99'}, {'tax_name': 'State Refuse Tax', 'tax_rate': None, 'tax_amount': '19.99'}]}, 'service_types': [{'service_name': 'Waste Container', 'current_service': '575.49', 'service_from_date': 'May 1, 2025', 'service_to_date': 'May 31, 2025', 'previous_reading': None, 'current_reading': None, 'line_item_charges': [{'category': '1 Waste Container 6 Cu Yd, 1 Lift Per Week Multi-Family', 'amount': '515.69', 'meter_number': None, 'ccf_usage': None, 'previous_reading': None, 'current_reading': None}, {'category': 'Hazardous Waste Fee 05/01-05/31', 'amount': '14.82', 'meter_number': None, 'ccf_usage': None, 'previous_reading': None, 'current_reading': None}, {'category': 'Pickup Service 05/01-05/31', 'amount': '515.69', 'meter_number': None, 'ccf_usage': None, 'previous_reading': None, 'current_reading': None}]}]}

END OF DATA
Successfully extracted data from 2 page(s)
Debug - organize_files called with result keys: ['account_number', 'customer_name', 'service_address', 'billing_address', 'bill_date', 'total_amount_due_date', 'number_of_days', 'previous_balance', 'current_billing', 'total_amount_due', 'payments_applied', 'republic_company_address', 'republic_contact_info', 'republic_payment_website', 'republic_late_fee', 'taxes', 'service_types', 'current_adjustments', 'payment_information', 'adjustments', 'billing_validation', 'source_file']
Debug - success_indicators: [True, True, True, True, True]
 Moved PDF to processed/pdf/Republic Services.pdf
Saved JSON to processed/json/Republic Services.json
Successfully processed Republic Services.pdf

============================================================
BATCH 1 SUMMARY
============================================================
Files in batch: 1
Successfully processed: 1
Failed/Incomplete: 0

============================================================
FINAL PROCESSING SUMMARY
============================================================
Total files processed: 1
Successfully extracted: 1
Incomplete/Failed: 0

Files organized into:
  - processed/pdf: 1 files
  - processed/json: 1 files
  - unprocessed/pdf: 0 files
  - unprocessed/json: 0 files
